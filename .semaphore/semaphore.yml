version: v1.0
name: Pouring
agent:
  machine:
    type: e1-standard-2
  containers:
    - name: main
      image: 'docker/compose'

blocks:
  - name: Build
    task:
      jobs:
        - name: Build
          commands:
            - checkout
            - ls -l
            - ./cmd/build.sh build
            
  - name: Push
    dependencies: ["Build"]
    task:
      jobs:
        - name: Push
          commands:
            - ./cmd/build.sh push

  - name: Deploy
    dependencies: ["Build", "Push"]
    task:
      jobs:
        - name: Deploy
          commands:
            - echo "Deploy"
